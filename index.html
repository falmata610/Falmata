<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Falmata's Pro E-commerce Store — Categories</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />

<style>
  /* Reset and base */
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    color: #e0e0e0;
    margin: 0;
    padding: 0 1rem 3rem;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  /* Header */
  header {
    width: 100%;
    max-width: 900px;
    padding: 2rem 0 1rem;
    text-align: center;
    border-bottom: 3px solid #00ffe1;
    margin-bottom: 1rem;
  }
  header h1 {
    margin: 0;
    font-weight: 600;
    font-size: 2.7rem;
    color: #00ffe1;
    letter-spacing: 1px;
  }

  /* Category Tabs */
  .categories {
    max-width: 900px;
    width: 100%;
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
  }
  .category-btn {
    background: transparent;
    border: 2px solid #00ffe1;
    color: #00ffe1;
    padding: 0.6rem 1.4rem;
    font-weight: 600;
    border-radius: 30px;
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease;
    user-select: none;
  }
  .category-btn:hover {
    background-color: #00ffe1;
    color: #121212;
  }
  .category-btn.active {
    background-color: #00ffe1;
    color: #121212;
    box-shadow: 0 0 15px #00ffe1cc;
  }

  /* Store container */
  .store {
    max-width: 900px;
    width: 100%;
    display: flex;
    gap: 2rem;
    justify-content: space-between;
    flex-wrap: wrap;
  }

  /* Products Grid */
  .products {
    flex: 1 1 600px;
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(200px,1fr));
    gap: 1.5rem;
  }

  /* Product card */
  .product {
    background: #1a1a1acc;
    border-radius: 10px;
    box-shadow: 0 0 20px #00ffe1aa;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
  }
  .product:hover {
    transform: translateY(-10px);
    box-shadow: 0 0 40px #00fff0cc;
  }
  .product img {
    width: 100%;
    height: 140px;
    object-fit: contain;
    margin-bottom: 1rem;
    border-radius: 6px;
    background: #121212;
  }
  .product h3 {
    margin: 0 0 0.5rem 0;
    font-weight: 600;
  }
  .product p {
    font-size: 0.9rem;
    color: #a0a0a0;
    margin: 0 0 0.8rem 0;
    text-align: center;
    flex-grow: 1;
  }
  .product .price {
    font-weight: 700;
    color: #00ffe1;
    margin-bottom: 1rem;
  }
  .product button {
    background: #00ffe1;
    color: #121212;
    border: none;
    padding: 0.5rem 1.3rem;
    border-radius: 30px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .product button:hover {
    background: #00ccaa;
  }

  /* Cart sidebar */
  .cart {
    flex: 0 0 280px;
    background: #1a1a1acc;
    border-radius: 10px;
    padding: 1rem 1.2rem;
    box-shadow: 0 0 30px #00ffe1bb;
    height: fit-content;
    position: sticky;
    top: 1rem;
  }
  .cart h2 {
    margin-top: 0;
    color: #00ffe1;
    text-align: center;
  }
  .cart-list {
    list-style: none;
    padding: 0;
    margin: 1rem 0;
    max-height: 350px;
    overflow-y: auto;
  }
  .cart-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 1rem;
    align-items: center;
  }
  .cart-item-name {
    font-weight: 600;
    flex: 1;
    margin-right: 0.5rem;
  }
  .cart-item-qty {
    display: flex;
    align-items: center;
    gap: 0.3rem;
  }
  .cart-item-qty button {
    background: #00ffe1;
    border: none;
    border-radius: 50%;
    width: 25px;
    height: 25px;
    font-weight: 700;
    cursor: pointer;
    color: #121212;
    user-select: none;
  }
  .cart-item-qty span {
    width: 20px;
    text-align: center;
  }
  .cart-item-price {
    margin-left: 0.8rem;
    color: #00ffe1;
    font-weight: 700;
    min-width: 55px;
    text-align: right;
  }
  .cart-total {
    border-top: 2px solid #00ffe1;
    font-weight: 700;
    font-size: 1.3rem;
    text-align: right;
    padding-top: 1rem;
    color: #00ffe1;
  }
  .checkout-btn {
    margin-top: 1rem;
    width: 100%;
    background: #00ffe1;
    border: none;
    border-radius: 30px;
    padding: 0.75rem;
    font-weight: 700;
    color: #121212;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .checkout-btn:hover {
    background: #00ccaa;
  }

  /* Responsive */
  @media (max-width: 800px) {
    .store {
      flex-direction: column;
      align-items: center;
    }
    .cart {
      width: 100%;
      max-width: 400px;
      margin-top: 2rem;
      position: relative;
      top: auto;
    }
  }
</style>
</head>
<body>

<header>
  <h1>Falmata's Pro E-commerce Store</h1>
</header>

<!-- Category Tabs -->
<nav class="categories" aria-label="Product Categories">
  <!-- Buttons will be dynamically added here -->
</nav>

<div class="store" role="main">

  <!-- Products Grid -->
  <section class="products" aria-label="Product List">
    <!-- Products will be dynamically added here -->
  </section>

  <!-- Cart Sidebar -->
  <aside class="cart" aria-label="Shopping Cart">
    <h2>Your Cart</h2>
    <ul class="cart-list" aria-live="polite" aria-relevant="additions removals"></ul>
    <div class="cart-total" aria-live="polite">Total: $0.00</div>
    <button class="checkout-btn" aria-label="Checkout Button">Checkout</button>
  </aside>

</div>

<script>
  // PRODUCTS DATA - Added categories now
  const products = [
    {
      id: 1,
      name: "Falmata's Classic Tee",
      description: "Comfortable cotton t-shirt with a clean design.",
      price: 19.99,
      image: "https://i.postimg.cc/4xgyHKCQ/59757286-804.jpg",
      category: "Tees"
    },
    {
      id: 2,
      name: "Pro Gamer Mug",
      description: "Start your day with some gaming fuel.",
      price: 14.99,
      image: "https://i.postimg.cc/jd0w12W1/gaming-mug.png",
      category: "Mugs"
    },
    {
      id: 3,
      name: "Wireless Headphones",
      description: "High quality sound and wireless freedom.",
      price: 79.99,
      image: "https://i.postimg.cc/htGm4sKm/wireless-headphones.png",
      category: "Electronics"
    },
    {
      id: 4,
      name: "Stylish Backpack",
      description: "Keep your essentials safe and stylish.",
      price: 49.99,
      image: "https://i.postimg.cc/mD2Q1WGy/backpack.png",
      category: "Bags"
    },
    {
      id: 5,
      name: "Gaming Tee Special",
      description: "Limited edition gamer t-shirt.",
      price: 25.99,
      image: "https://i.postimg.cc/cJXwr3jh/gaming-tee.png",
      category: "Tees"
    },
    {
      id: 6,
      name: "Coffee Mug Extra",
      description: "Large size coffee mug for all caffeine lovers.",
      price: 18.99,
      image: "https://i.postimg.cc/fyCjLfP7/coffee-mug.png",
      category: "Mugs"
    }
  ];

  // Extract unique categories plus "All"
  const categories = ["All", ...new Set(products.map(p => p.category))];

  // CART STATE
  const cart = {};

  // DOM elements
  const categoriesContainer = document.querySelector('.categories');
  const productsContainer = document.querySelector('.products');
  const cartList = document.querySelector('.cart-list');
  const cartTotal = document.querySelector('.cart-total');

  let activeCategory = "All";

  // FORMAT PRICE to $X.XX
  function formatPrice(num) {
    return '$' + num.toFixed(2);
  }

  // Render category buttons
  function renderCategories() {
    categoriesContainer.innerHTML = '';
    categories.forEach(cat => {
      const btn = document.createElement('button');
      btn.className = 'category-btn';
      btn.textContent = cat;
      btn.setAttribute('aria-pressed', cat === activeCategory);
      if (cat === activeCategory) btn.classList.add('active');
      btn.addEventListener('click', () => {
        if (activeCategory === cat) return; // no change
        activeCategory = cat;
        renderCategories();
        renderProducts();
      });
      categoriesContainer.appendChild(btn);
    });
  }

  // RENDER PRODUCTS filtered by active category
  function renderProducts() {
    productsContainer.innerHTML = '';
    const filteredProducts = activeCategory === "All" ? products : products.filter(p => p.category === activeCategory);

    if (filteredProducts.length === 0) {
      productsContainer.innerHTML = '<p style="color:#aaa; text-align:center;">No products found in this category.</p>';
      return;
    }

    filteredProducts.forEach(product => {
      const productDiv = document.createElement('div');
      productDiv.className = 'product';
      productDiv.setAttribute('tabindex', '0');
      productDiv.innerHTML = `
        <img src="${product.image}" alt="${product.name}" />
        <h3>${product.name}</h3>
        <p>${product.description}</p>
        <div class="price">${formatPrice(product.price)}</div>
        <button aria-label="Add ${product.name} to cart">Add to Cart</button>
      `;
      productDiv.querySelector('button').addEventListener('click', () => {
        addToCart(product.id);
      });
      productsContainer.appendChild(productDiv);
    });
  }

  // ADD product to cart
  function addToCart(productId) {
    if (cart[productId]) {
      cart[productId].qty++;
    } else {
      const product = products.find(p => p.id === productId);
      cart[productId] = {
        ...product,
        qty: 1
      };
    }
    renderCart();
  }

  // REMOVE product from cart
  function removeFromCart(productId) {
    delete cart[productId];
    renderCart();
  }

  // UPDATE product qty in cart
  function updateQty(productId, change) {
    if (!cart[productId]) return;
    cart[productId].qty += change;
    if (cart[productId].qty <= 0) {
      removeFromCart(productId);
    } else {
      renderCart();
    }
  }

  // RENDER CART ITEMS AND TOTAL
  function renderCart() {
    cartList.innerHTML = '';
    let total = 0;

    if (Object.keys(cart).length === 0) {
      cartList.innerHTML = '<li>Your cart is empty</li>';
      cartTotal.textContent = 'Total: $0.00';
      return;
    }

    for (const key in cart) {
      const item = cart[key];
      const li = document.createElement('li');
      li.className = 'cart-item';
      const itemTotal = item.price * item.qty;
      total += itemTotal;

      li.innerHTML = `
        <span class="cart-item-name">${item.name}</span>
        <div class="cart-item-qty" aria-label="Quantity controls for ${item.name}">
          <button aria-label="Decrease quantity" tabindex="0">−</button>
          <span>${item.qty}</span>
          <button aria-label="Increase quantity" tabindex="0">+</button>
        </div>
        <span class="cart-item-price">${formatPrice(itemTotal)}</span>
      `;

      const btns = li.querySelectorAll('button');
      btns[0].addEventListener('click', () => updateQty(item.id, -1));
      btns[1].addEventListener('click', () => updateQty(item.id, 1));

      cartList.appendChild(li);
    }
    cartTotal.textContent = `Total: ${formatPrice(total)}`;
  }

  // CHECKOUT button action
  const checkoutBtn = document.querySelector('.checkout-btn');
  checkoutBtn.addEventListener('click', () => {
    if (Object.keys(cart).length === 0) {
      alert('Your cart is empty! Add some products first.');
      return;
    }
    alert('Thanks for your order! (This is just a demo.)');
    for (const key in cart) {
      delete cart[key];
    }
    renderCart();
  });

  // INITIALIZE
  renderCategories();
  renderProducts();
  renderCart();

</script>

</body>
</html>
